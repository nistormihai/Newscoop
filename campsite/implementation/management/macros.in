changecom`'dnl
changequote({, })dnl
define({X_ROOT}, {/priv})dnl
define({X_TMP}, {/tmp})dnl
define({LOOK_PATH}, {/look})dnl
define({X_MYSQL_HOST}, {localhost})dnl
define({X_MYSQL_USER}, {root})dnl
define({X_MYSQL_PASSWORD}, {})dnl
define({X_MYSQL_DB}, {campsite})dnl
define({B_DATABASE}, {<!sql connect "X_MYSQL_HOST" "X_MYSQL_USER" "X_MYSQL_PASSWORD"><!sql database "X_MYSQL_DB">})dnl
define({E_DATABASE}, {<!sql close>})dnl
dnl
dnl *** General ***
dnl
define({B_HTML}, {<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
	"http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>})dnl
define({E_HTML}, {</HTML>})dnl
define({B_HEAD}, {<HEAD>})dnl
define({E_HEAD}, {</HEAD>})dnl
define({X_TITLE}, {<TITLE>$1</TITLE>})dnl
define({X_COOKIE}, {<META HTTP-EQUIV="Set-Cookie" CONTENT="$1; path=/">})dnl
define({X_EXPIRES}, {<META HTTP-EQUIV="Expires" CONTENT="now">})dnl
define({X_REFRESH}, {<META HTTP-EQUIV="Refresh" CONTENT="$1">})dnl
define({X_LOGOUT}, {X_REFRESH(0; URL=X_ROOT/logout.xql)})dnl
define({X_AD}, {<!sql set ad_reason "$1"><!sql setexpr url_ad_reason {#ad_reason}>X_REFRESH(0; URL=X_ROOT/ad.xql?ADReason=<!sql print $url_ad_reason>)})dnl
define({B_STYLE}, {<STYLE>
	BODY {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	SMALL {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 8pt; }}
	FORM {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	TH {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	TD {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	BLOCKQUOTE {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	UL {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	LI {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; }}
	A  {{ font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 10pt; text-decoration: none; color: darkblue; }}
	ADDRESS {{  font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 8pt; }}})dnl
define({E_STYLE}, {</STYLE>})dnl
define({B_BODY}, {<BODY BGCOLOR="WHITE" TEXT="BLACK" LINK="DARKBLUE" ALINK="RED" VLINK="DARKBLUE">})dnl
define({B_BODY_SPECIAL}, {<BODY BGCOLOR="WHITE" TEXT="BLACK" LINK="DARKBLUE" ALINK="RED" VLINK="DARKBLUE" ONUNLOAD="check()">})dnl
define({E_BODY}, {</BODY>})dnl
define({B_MBODY}, {<BODY BGCOLOR="#D0D0B0" TEXT="BLACK" LINK="DARKBLUE" ALINK="RED" VLINK="DARKBLUE">})dnl
define({E_MBODY}, {</BODY>})dnl
define({X_HR}, {<HR NOSHADE SIZE="1" COLOR="BLACK">})dnl
define({X_COPYRIGHT}, {<a STYLE='font-size:8pt;color:#000000' href='http://www.campware.org' target='campware'>CAMPSITE 2.0.12 &copy 1999-2001 MDLF, maintained and distributed under GNU GPL by CAMPWARE</a>})dnl
define({X_NEW_BUTTON}, {<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1"><TR><TD><A HREF="$2" ifelse({$3}, {}, {}, {ONCLICK="$3"})><IMG SRC="X_ROOT/img/tol.gif" BORDER="0"></A></TD><TD><A HREF="$2" ifelse({$3}, {}, {}, {ONCLICK="$3"})><B>$1</B></A></TD></TR></TABLE>})dnl
define({X_BULLET}, {<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1"><TR><TD><IMG SRC="X_ROOT/img/tol.gif" BORDER="0"></TD><TD>$1</TD></TR></TABLE>})dnl
define({X_NEXT_I}, { | Next &gt;&gt;})dnl
define({X_NEXT_A}, { | <B><A HREF="$1">Next &gt;&gt</A></B>})dnl
define({X_PREV_I}, {&lt;&lt; Previous})dnl
define({X_PREV_A}, {<B><A HREF="$1">&lt;&lt; Previous</A></B>})dnl
define({X_BUTTON}, {<A HREF="X_ROOT/$3"><IMG SRC="X_ROOT/img/$2" BORDER="0" ALT="$1"></A>})dnl
dnl
dnl *** Header ****
dnl
define({B_HEADER}, {<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1" WIDTH="100%">
	<TR>
		<TD ROWSPAN="2" WIDTH="1%"><IMG SRC="X_ROOT/img/sign_big.gif" BORDER="0"></TD>
		<TD>
		    <DIV STYLE="font-size: 12pt"><B>$1</B></DIV>
		    X_HR
		</TD>
	</TR>})dnl
define({X_HEADER_NO_BUTTONS}, {	<TR><TD>&nbsp;</TD></TR>})dnl
define({B_HEADER_BUTTONS}, {	<TR><TD ALIGN=RIGHT><TABLE BORDER="0" CELLSPACING="1" CELLPADDING="0"><TR>dnl})dnl
define({X_HBUTTON}, {<TD><A HREF="X_ROOT/$2" ifelse({$3}, {}, {}, {TARGET="$3"})><IMG SRC="X_ROOT/img/tol.gif" BORDER="0" ALT="$1"></A></TD><TD><A HREF="X_ROOT/$2" ifelse({$3}, {}, {}, {TARGET="$3"})><B>$1</B></A></TD>})dnl
define({E_HEADER_BUTTONS}, {</TR></TABLE></TD></TR>})dnl
define({E_HEADER}, {</TABLE>})dnl
dnl
dnl *** Menu ***
dnl
define({B_MENU}, {<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1" WIDTH="100%">})dnl
define({X_MENU_ITEM}, {<TR><TD ALIGN="RIGHT"><A HREF="$2" ONCLICK="$3" TARGET="fmain"><IMG SRC="X_ROOT/img/tol.gif" BORDER="0" ALT="$1"></A></TD><TD NOWRAP><A HREF="$2" ONCLICK="$3" TARGET="fmain">$1</A></TD></TR>})dnl
define({X_HITEM}, {<TR><TD ALIGN="RIGHT"><A HREF="$1"><IMG SRC="X_ROOT/img/tol.gif" BORDER="0" ALT="$2"></A></TD><TD NOWRAP><A HREF="$1">$2</A></TD></TR>})dnl
define({X_MENU_BAR}, {<TR><TD COLSPAN="2">X_HR</TD></TR>})dnl
define({E_MENU}, {</TABLE>})dnl
dnl
dnl *** Home Page Menu ***
dnl
define({B_HOME_MENU}, {<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="2" ALIGN="CENTER">define({X_HOME_MENU_P}, {$1})})dnl
define({B_HOME_MENU_HEADER}, {<TR>})dnl
define({X_HOME_MENU_TH}, {<TD WIDTH="1%" VALIGN="TOP"><A HREF="$2"><IMG SRC="X_ROOT/img/tol.gif" BORDER="0"></A></TD><TD WIDTH="X_HOME_MENU_P"><B><A HREF="$2">$1</A></B></TD>})dnl
define({X_HOME_MENU_TH_EMPTY}, {<TD COLSPAN="2">&nbsp;</TD>})dnl
define({E_HOME_MENU_HEADER}, {</TR>})dnl
define({B_HOME_MENU_BODY}, {<TR>})dnl
define({B_HOME_MENU_TD}, {<TD></TD><TD VALIGN="TOP" BGCOLOR="#C0D0FF">})dnl
define({X_HOME_MENU_ITEM}, {$1})dnl
define({E_HOME_MENU_TD}, {</TD>})dnl
define({X_HOME_MENU_TD_EMPTY}, {<TD COLSPAN="2">&nbsp;</TD>})dnl
define({E_HOME_MENU_BODY}, {</TR>})dnl
define({E_HOME_MENU}, {</TABLE>})dnl
dnl
dnl *** Current object **
dnl
define({B_CURRENT}, {<TABLE BORDER="0" CELLSPACING="1" CELLPADDING="1" WIDTH="100%"><TR>})dnl
define({X_CURRENT}, {<TD ALIGN="RIGHT" WIDTH="1%" NOWRAP VALIGN="TOP">&nbsp;$1</TD><TD BGCOLOR="#D0D0B0">$2</TD>
})dnl
define({E_CURRENT}, {</TR></TABLE>})dnl
dnl
dnl *** List ***
dnl
define({B_LIST}, {<TABLE BORDER="0" CELLSPACING="1" CELLPADDING="0" WIDTH="100%">})dnl
define({B_LIST_HEADER}, {<TR BGCOLOR="#C0D0FF">})dnl
define({X_LIST_TH}, {<TD ifelse({$2}, {}, {}, {WIDTH="$2"}) ifelse({$3}, {}, {}, {$3})><B>$1</B></TD>})dnl
define({E_LIST_HEADER}, {</TR>})dnl
define({B_LIST_TR}, {<TR <!sql if $color><!sql set color 0>BGCOLOR="#D0D0B0"<!sql else><!sql set color 1>BGCOLOR="#D0D0D0"<!sql endif>>})dnl
define({B_LIST_ITEM}, {<TD ifelse({$1}, {}, {}, {ALIGN="$1"}){}ifelse({$2}, {}, {}, {COLSPAN="$2"})>})dnl
define({E_LIST_ITEM}, {</TD>})dnl
define({E_LIST_TR}, {</TR>})dnl
define({B_LIST_FOOTER}, {<TR><TD COLSPAN="2" NOWRAP>})dnl
define({E_LIST_FOOTER}, {</TD></TR>})dnl
define({E_LIST}, {</TABLE>})dnl
dnl
dnl *** Dialog ***
dnl
define({B_DIALOG}, {<FORM NAME="dialog" METHOD="$2" ACTION="$3" ifelse({$4}, {}, {}, {ENCTYPE="$4"})>
<CENTER><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="6" BGCOLOR="#C0D0FF" ALIGN="CENTER">
	<TR>
		<TD COLSPAN="2">
			<B>$1</B>
			X_HR
		</TD>
	</TR>})dnl
define({X_DIALOG_TEXT}, {<TR>
		<TD COLSPAN="2">$1</TD>
	</TR>})dnl
define({B_DIALOG_INPUT}, {<TR>
		<TD ALIGN="RIGHT" ifelse({$2}, {}, {}, {VALIGN="$2"})>$1</TD>
		<TD>})dnl
define({B_DIALOG_PACKEDINPUT}, {<TR>
		<TD>&nbsp;</TD><TD>
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1" WIDTH="100%">
})dnl
define({E_DIALOG_PACKEDINPUT}, {	</TABLE>
	</TD>
	</TR>})dnl
define({E_DIALOG_INPUT}, {	</TD>
	</TR>})dnl
define({B_DIALOG_BUTTONS}, {<TR>
		<TD COLSPAN="2">
		<DIV ALIGN="CENTER">})dnl
define({E_DIALOG_BUTTONS}, {	</DIV>
		</TD>
	</TR>})dnl
define({E_DIALOG}, {</TABLE></CENTER>
</FORM>})dnl
dnl
dnl *** Message box ***
dnl
define({B_MSGBOX}, {<CENTER><TABLE BORDER="0" CELLSPACING="0" CELLPADDING="8" BGCOLOR="#C0D0FF" ALIGN="CENTER">
	<TR>
		<TD COLSPAN="2">
			<B>$1</B>
			X_HR
		</TD>
	</TR>})dnl
define({X_MSGBOX_TEXT}, {<TR>
		<TD COLSPAN="2"><BLOCKQUOTE>$1</BLOCKQUOTE></TD>
	</TR>})dnl
define({B_MSGBOX_BUTTONS}, {<TR>
		<TD COLSPAN="2">
		<DIV ALIGN="CENTER">})dnl
define({E_MSGBOX_BUTTONS}, {	</DIV>
		</TD>
	</TR>})dnl
define({E_MSGBOX}, {</TABLE></CENTER>})dnl
dnl
dnl *** SearchDialog ***
dnl
define({B_SEARCH_DIALOG}, {<FORM METHOD="$1" ACTION="$2" NAME="$3">
	<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="1" BGCOLOR="#C0D0FF">
	<TR>})dnl
define({E_SEARCH_DIALOG}, {</TR>
	</TABLE>
</FORM>})dnl
dnl
dnl *** Access ***
dnl
define({CHECK_BASIC_ACCESS},
    {
    <!-- <!sql setdefault TOL_UserId 0> <!sql setdefault TOL_UserKey 0> -->
    <!sql set NUM_ROWS 0>dnl
    <!sql query "SELECT * FROM Users WHERE Id=?TOL_UserId AND KeyId=?TOL_UserKey" Usr>dnl
    <!sql setexpr access ($NUM_ROWS != 0)>
    <!sql if $NUM_ROWS>
	<!sql query "SELECT * FROM UserPerm WHERE IdUser=?Usr.Id" XPerm>
    <!sql else>
	<!sql query "SELECT * FROM UserPerm WHERE 1=0" XPerm>
    <!sql endif>
    }
)dnl
define({CHECK_ACCESS},
    {
    <!sql if $access>
	<!sql query "SELECT $1 FROM UserPerm WHERE IdUser=?Usr.Id" Perm>
	<!sql setexpr access (@Perm.$1 == "Y")>
    <!sql endif>
    }
)dnl
define({CHECK_XACCESS}, {<!sql setexpr xaccess (@XPerm.$1 == "Y")>})dnl
define({SET_ACCESS}, {<!sql setexpr $1 (@XPerm.$2 == "Y")>})dnl
define({X_XAD}, {
<P>
B_MSGBOX({Access denied!})
	X_MSGBOX_TEXT({<LI>$1</LI>})
	B_MSGBOX_BUTTONS
		<A HREF="X_ROOT/$2"><IMG SRC="X_ROOT/img/button/ok.gif" BORDER="0" ALT="OK"></A>
	E_MSGBOX_BUTTONS
E_DIALOG
<P>
})dnl
dnl
dnl *** Logging ***
dnl
define({X_AUDIT}, {<!sql query "INSERT INTO Log SET TStamp=NOW(), IdEvent=$1, User='@Usr.UName', Text='$2'">})dnl
